<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>협력 LIVE 스탬프</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.1.1/normalize.min.css">
        <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/react/15.1.0/react.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/react/15.1.0/react-dom.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
        <style>
            @import url(http://fonts.googleapis.com/earlyaccess/nanumgothic.css);
            * { font-size: 10px; font-family: 'Nanum Gothic', sans-serif; }
            #title { font-size: 4rem; text-align: center; }
            #stamps { font-size: 1rem; width: 110em; margin: 1rem auto; }
            .stamp { float: left; width: 35em; height: 10em; font-size: 1em; text-align: center; border: 1px solid #ddd; margin: 0.5rem; padding: 0.2em; }
            .stamp_img { float: left; width: 9em; height: 9em; font-size: 1em; margin: 0.5em; }
            .text { width: 23em; height: 9em; float: right; font-size: 1em; margin: 0.5em; }
            .text > * { display: block; }
            .text * { font-size: 1.5em; line-height: 1.4em; margin: 0; }
            .chara { font-weight: bold; font-size: 1.8em; line-height: 2.2em; }
            small { color: #888; }
            .text small { font-size: 0.8em; }
            .chara small { font-size: 0.7em; }
            .text .msg_korea { font-size: 1.3em; color: #666; }
        </style>
    </head>
    <body>
        <h1 id="title">- 협력 LIVE 스탬프 -</h1>
        <div id="content"></div>
        <script type="text/babel">
// Option
var rowOnStampNums = 3;

// ReactJS Codes..
function createMarkup(html) { return {__html: html}; };
var Stamp = React.createClass({
  render: function() {
    return (
        <div className="stamp">
            <img className="stamp_img" src={this.props.img}/>
            <div className="text">
                <p className="chara">{this.props.nameKr}<small>{this.props.nameJp}</small></p>
                <p className="msg_japan" dangerouslySetInnerHTML={createMarkup(this.props.messageJp)}></p>
                <p className="msg_korea">{this.props.messageKr}</p>
            </div>
        </div>
    );
  }
});

var zeroFill = function(number, width) {
    width -= number.toString().length;
    if (width > 0) {
        return new Array(width + (/\./.test( number ) ? 2 : 1)).join( '0' ) + number;
    }
    return number + ""; // always return a string
}

var renderStamp = function(stampdata) {
    var height = Math.ceil(datas.length / rowOnStampNums) * 11.8;
    var stampsStyle = {
        height: height+"em",
    };
    var stampList = datas.map(function (stamp, idx) {
        var img_path = "img/stamp_"+zeroFill(stamp.idx, 6)+".png";
        return (
            <Stamp img={img_path} 
                nameKr={stamp.nameKr} 
                nameJp={stamp.nameJp} 
                messageKr={stamp.messageKr} 
                messageJp={stamp.messageJp}/>
        );
    });

    ReactDOM.render(
        <div id="stamps" style={stampsStyle}>{stampList}</div>,
        document.getElementById('content')
    );
}

$(document).ready(function() {
    $.getJSON("info.json", function(stamp_data) { renderStamp(stamp_data) });
});
        </script>
    </bodY>
</html>
